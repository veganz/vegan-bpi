!function(o){var a=function(a){var t=o.extend({callback:o.noop},a||{});o.ajax({dataType:"jsonp",url:"http://dev.virtualearth.net/REST/v1/Locations/"+t.lat+","+t.lng,data:"o=json&key=AtyTM5gnsQayzc_m7o3XvAmSDUpmRR7BMA0X1LjyuYaAYbc8q0tJOOFuKnfj0Utn&jsonp=?",success:function(o){t.callback(o.resourceSets[0].resources[0].address.locality)}})},t=function(a){var t=o.extend({callback:o.noop},a||{});o.ajax({dataType:"jsonp",url:"http://dev.virtualearth.net/REST/v1/Locations/US/"+t.zipCode,data:"o=json&key=AtyTM5gnsQayzc_m7o3XvAmSDUpmRR7BMA0X1LjyuYaAYbc8q0tJOOFuKnfj0Utn&jsonp=?",success:function(o){t.callback(o.resourceSets[0].resources[0].address.locality)}})};navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){a({lat:t.coords.latitude,lng:t.coords.longitude,callback:function(a){a&&(o(".bpd-postal-code").addClass("hidden"),o(".bpd-location-city").html(a))}})}),o(".bpd-postal-code").focus(),o(".bpd-location-form").submit(function(a){a.preventDefault(),t({zipCode:o(".bpd-postal-code").val(),callback:function(a){a&&(o(".bpd-postal-code").addClass("hidden"),o(".bpd-location-city").html(a))}})})}(jQuery);