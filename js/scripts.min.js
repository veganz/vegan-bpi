!function(t){"use strict";var e=function(e){var o;if(e&&""!==t.trim(e)&&(o=t.trim(e)),o){var s;if(isNaN(o)){var a=o.split("-");2!==a.length||isNaN(a[0])||isNaN(a[1])||5!==a[0].length||(s=a[0]);var d=o.split(" ");if(d.length>1){var r=d[d.length-1];if(isNaN(r)){var i=r.split("-");2!==i.length||isNaN(i[0])||isNaN(i[1])||5!==i[0].length||(s=i[0])}else s=r}}else 5===o.length&&(s=o);return s}throw new Error("getZIPCodeFromAddress() -> No address provided")},o="AtyTM5gnsQayzc_m7o3XvAmSDUpmRR7BMA0X1LjyuYaAYbc8q0tJOOFuKnfj0Utn",s=function(s){var a,d=t.extend({},s||{}),r="http://dev.virtualearth.net/REST/v1/Locations",i=d.lat,l=d.lng;if(d.address&&""!==t.trim(d.address)&&(a=t.trim(d.address)),!(i&&l||a))throw new Error("getBingMapsAPIUrl() -> No lat/long or address provided");if(i&&l)return r+"/"+i+","+l+"?o=json&key="+o+"&jsonp=?";if(a){var n=e(a);return r+"?"+(n?"countryRegion=US&postalCode="+n:"q="+a)+"&o=json&key="+o+"&jsonp=?"}},a=function(e){var o,a,d=t.extend({callback:t.noop},e||{}),r=d.lat,i=d.lng;if(d.address&&""!==t.trim(d.address)&&(o=t.trim(d.address)),!(r&&i||o))throw new Error("getLocations() -> No lat/long or address provided");if(a=s({lat:r,lng:i,address:o}),!a)throw new Error("getLocations() -> requestUrl is undefined");t.ajax({dataType:"jsonp",url:a,success:function(e){var o,s=e.resourceSets[0];s&&s.resources&&s.resources[0]&&t.each(s.resources,function(){this.address&&this.address.countryRegion&&"United States"===this.address.countryRegion&&(o||(o=[]),o.push(this))}),d.callback(o)}})};t("body").is(".home")?(t(".bpd-postal-code").focus(),navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){""===t(".bpd-postal-code").val()&&(t(".bpd-postal-code").attr("disabled","disabled"),a({lat:e.coords.latitude,lng:e.coords.longitude,callback:function(e){var o;if(e){var s,a,d,r=e[0],i=r.address;i?(s=i.locality,a=i.adminDistrict,d=i.postalCode,d?(t(".bpd-postal-code").addClass("hidden"),t(".bpd-location-city").html((s?s+(a?", "+a:"")+" ":"")+d)):o=!0):o=!0}else o=!0;o&&t(".bpd-postal-code").removeAttr("disabled")}}))}),t(".bpd-location-form").submit(function(e){e.preventDefault(),""===t(".bpd-postal-code").val()||a({address:t(".bpd-postal-code").val(),callback:function(e){var o;if(e)if(1===e.length){var s,a,d,r=e[0],i=r.address;i?(s=i.locality,a=i.adminDistrict,d=i.postalCode,d?(t(".bpd-postal-code").addClass("hidden"),t(".bpd-location-city").html((s?s+(a?", "+a:"")+" ":"")+d)):o=!0):o=!0}else t(".bpd-postal-code").removeAttr("disabled");else o=!0;o&&t(".bpd-postal-code").removeAttr("disabled")}})})):(t(".bpd-location-change").click(function(t){t.preventDefault()}),t(".bpd-type-col .bpd-type").click(function(e){e.preventDefault(),t(this).closest(".bpd-type-col").is(".active")||(t(".bpd-type-col.active").removeClass("active"),t(this).closest(".bpd-type-col").addClass("active"))}))}(jQuery);